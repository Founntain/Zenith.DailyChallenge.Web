@if (communityChallenge !== undefined) {
  <div class="baseContainer ">

    <div class="flexContainer flexColumn">
      <div class="flexContainer flexStretch flexRow borderBottom">
        <div class="flexContainer flexStretch centerText headerText pageText navButton" (click)="goToPage(communityChallenge.previousChallengeId)">
          <span>PREVIOUS</span>
        </div>

        <div class="flexContainer flexStretch centerText headerText pageText navButton" (click)="goToPage(communityChallenge.nextChallengeId)">
          <span>NEXT</span>
        </div>
      </div>

      <div class="flexContainer flexStretch flexColumn centerText">
        <span class="headerText title"> Community Challenge </span>

        <span class="boldText">{{communityChallenge.startDate}} - {{communityChallenge.endDate}}</span>

        @if (communityChallenge.name !== undefined) {
          <div class="flexStretch flexColumn">
            <span class="headerText title"> {{communityChallenge.name}}</span>
            @if (communityChallenge.description !== undefined) {
              <span class="headerText"> {{communityChallenge.description}}</span>
            }
          </div>
        }

        <div class="gap">
          @for (mod of communityChallenge?.mods; track $index) {
            <img class="bigMod flexStretch" src="assets/tetrio-img/mods/{{mod}}.png">
          }
        </div>

        <div class="headerText title">
          <span>{{communityChallenge.value.toLocaleString()}} {{getTypeSuffix(communityChallenge.conditionType)}}</span>
          <span> / </span>
          <span>{{communityChallenge.targetValue.toLocaleString()}} {{getTypeSuffix(communityChallenge.conditionType)}}</span>
        </div>
      </div>
    </div>


    <div style="overflow-x: auto">
      <table mat-table [dataSource]="communityChallenge.participants">
        <ng-container matColumnDef="Username">
          <th mat-header-cell *matHeaderCellDef class="headerText"> Username </th>
          <td mat-cell *matCellDef="let element" >
            <div class="flexRow" style="align-items: center; gap: 5px">
              <a class="link headerText uppercase" style="vertical-align: center" [routerLink]="['/user', element.name]">{{element.name}}</a>
            </div>
          </td>
        </ng-container>

        <ng-container matColumnDef="Contributions">
          <th mat-header-cell *matHeaderCellDef class="headerText" style="text-align: center"> Contributions</th>
          <td mat-cell *matCellDef="let element" class="headerText" style="text-align: center" > {{element.contributions.toLocaleString()}} {{getTypeSuffix(communityChallenge.conditionType)}}</td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="columns" ></tr>
        <tr mat-row *matRowDef="let _; columns: columns;" ></tr>
      </table>
    </div>
  </div>
}
